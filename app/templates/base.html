<!doctype html>
<html>
    <head>
        {% block head %}
        <title>{% block title %}{% endblock %} - {{ title }}</title>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css">
        <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
       <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>

       <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>

       <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">
       <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css">
       <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.6/css/responsive.bootstrap4.min.css">

        <!-- Material Design Bootstrap -->
       <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.14.0/css/mdb.min.css" rel="stylesheet">-->
       <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
       <script src="https://cdn.jsdelivr.net/npm/igv@2.7.4/dist/igv.min.js"></script>
       <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
       <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
       <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
       <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
       <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script>
       <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/responsive/2.2.6/js/dataTables.responsive.min.js"></script>
       <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/responsive/2.2.6/js/responsive.bootstrap4.min.js"></script>

       <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"></script>
       <script type="text/javascript" language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
       <script type="text/javascript" language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
       <script type="text/javascript" language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
       <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js"></script>
       <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.print.min.js"></script>

       <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.7.2/min/dropzone.min.js"></script>
       <script type="text/javascript" class="init">
          /* Formatting function for row details - modify as you need */
          $('#myTabContent').on('click', function (e) {
            e.preventDefault()
            $(this).tab('show')
          })
       </script>

        <script>
          $(document).ready(function() {
              $("#create_report1").click(function() {
                  // disable button
                  $(this).prop("disabled", true);
                  // add spinner to button
                  $(this).html(
                      `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Generant informe...`
                  );
              });
          });
        </script>


      <script>
        function modal(){
          var elem = document.getElementById('loading_modal')
          elem.modal('show')
          setTimeout(function () {
            console.log('hejsan');
            elem.modal('hide');
          });
        }
      </script>

        <script type="text/javascript" class="init">

        $(document).ready(function() {
            var table = $('#panel_table').DataTable( {
            "language": {
              "lengthMenu": "Mostra _MENU_ resultats per pàgina",
              "zeroRecords": "No hi ha variants",
              "info": "Pàgina _PAGE_ of _PAGES_",
              "infoEmpty": "No hi ha entrades",
              "infoFiltered": "(filtrats de _MAX_ total records)",
              "sSearch" : "Cerca:"
            },
              order: [ 1, 'asc' ]
            } );
        } );

        $(document).ready(function() {
            var table = $('#status_table').DataTable( {
            "language": {
              "lengthMenu": "Mostra _MENU_ resultats per pàgina",
              "zeroRecords": "No hi ha variants",
              "info": "Pàgina _PAGE_ of _PAGES_",
              "infoEmpty": "No hi ha entrades",
              "infoFiltered": "(filtrats de _MAX_ total records)",
              "sSearch" : "Cerca:"
            },
              order: [ 0, 'desc' ]
            } );
        } );

        $(document).ready(function() {
            var table = $('#roi_table').DataTable( {
            "pageLength":5,

            "language": {
              "lengthMenu": "Mostra _MENU_ resultats per pàgina",
              "zeroRecords": "No hi ha variants",
              "info": "Pàgina _PAGE_ of _PAGES_",
              "infoEmpty": "No hi ha entrades",
              "infoFiltered": "(filtrats de _MAX_ total records)",
              "sSearch" : "Cerca:",
            },
              order: [ 0, 'asc' ]
            } );
        } );

         $(document).ready(function() {
            var table = $('#petition_table').DataTable( {

            "language": {
              "lengthMenu": "Mostra _MENU_ resultats per pàgina",
              "zeroRecords": "No hi ha variants",
              "info": "Pàgina _PAGE_ of _PAGES_",
              "infoEmpty": "No hi ha entrades",
              "infoFiltered": "(filtrats de _MAX_ total records)",
              "sSearch" : "Cerca:"
            },

              order: [ 0, 'desc' ]
            } );
        } );
        $(document).ready(function() {
            var table = $('#therapeutic_table').DataTable( {

            "language": {
              "lengthMenu": "Mostra _MENU_ resultats per pàgina",
              "zeroRecords": "No hi ha variants",
              "info": "Pàgina _PAGE_ of _PAGES_",
              "infoEmpty": "No hi ha entrades",
              "infoFiltered": "(filtrats de _MAX_ total records)",
              "sSearch" : "Cerca:"
            },

              order: [ 0, 'asc' ]
            } ).columns.adjust().responsive.recalc();
        } );
        $(document).ready(function() {
            var table = $('#others_table').DataTable( {
              "language": {
                "lengthMenu": "Mostra _MENU_ resultats per pàgina",
                "zeroRecords": "No hi ha variants",
                "info": "Pàgina _PAGE_ of _PAGES_",
                "infoEmpty": "No hi ha entrades",
                "infoFiltered": "(filtrats de _MAX_ total records)",
                "sSearch" : "Cerca:"
              },

              order: [ 1, 'asc' ]
            } );
        } );
        $(document).ready(function() {
            var table = $('#rare_table').DataTable( {

            "language": {
              "lengthMenu": "Mostra _MENU_ resultats per pàgina",
              "zeroRecords": "No hi ha variants",
              "info": "Pàgina _PAGE_ of _PAGES_",
              "infoEmpty": "No hi ha entrades",
              "infoFiltered": "(filtrats de _MAX_ total records)",
              "sSearch" : "Cerca:"
            },
              order: [ 1, 'asc' ]
            } );
        } );
        $(document).ready(function() {
            var table = $('#cnas_table').DataTable( {
            "language": {
              "lengthMenu": "Mostra _MENU_ resultats per pàgina",
              "zeroRecords": "No hi ha variants",
              "info": "Pàgina _PAGE_ of _PAGES_",
              "infoEmpty": "No hi ha entrades",
              "infoFiltered": "(filtrats de _MAX_ total records)",
              "sSearch" : "Cerca:"
            },
              order: [ 0, 'asc' ],
              buttons: ['excel', 'csv'],
            } );
        } );
        $(document).ready(function() {
            var table = $('#fusions_table').DataTable( {

            "language": {
              "lengthMenu": "Mostra _MENU_ resultats per pàgina",
              "zeroRecords": "No hi ha variants",
              "info": "Pàgina _PAGE_ of _PAGES_",
              "infoEmpty": "No hi ha entrades",
              "infoFiltered": "(filtrats de _MAX_ total records)",
              "sSearch" : "Cerca:"
            },
              order: [ 6, 'desc' ],
              buttons: ['excel', 'csv'],

            } );
        } );
        // $(document).ready(function() {
        //   $('#petition_table').DataTable();
        // } );

        $(document).ready(function() {
            var table = $('#run_table').DataTable( {

            "language": {
              "lengthMenu": "Mostra _MENU_ resultats per pàgina",
              "zeroRecords": "No hi ha variants",
              "info": "Pàgina _PAGE_ of _PAGES_",
              "infoEmpty": "No hi ha entrades",
              "infoFiltered": "(filtrats de _MAX_ total records)",
              "sSearch" : "Cerca:"
            },


              order: [ 0, 'asc' ]
            } );


        } );
        </script>

       <style>
         .jumbotron{
          background:contain;

         }
        .jumbotron-image {
          width:100%;
          height: 100%;
          object-fit:cover;
          background:contain;
        }
        .jumbotron-content{
          color:black;
        }
        .numberCircle {
            border-radius: 50%;
            width: 40px;
            height: 40px;
            padding: 4px;
            margin-left:10px;

            background: rgb(33, 78, 226);
            border: 2px solid rgb(33, 78, 226);
            color: rgb(255, 255, 255);
            text-align: center;

            font: 24px Arial, sans-serif;
        }
       </style>
        <script>
            var slider = new Slider('#purity-slider', {
              formatter: function(value) {
                return 'Current value: ' + value;
              }
            });

            $('#datepicker').datepicker({
              uiLibrary: 'bootstrap4'
              format: 'dd/mm/yyyy',
            });

            $('button').click( function() {
                var data = table.$('input, select').serialize();
                alert(
                    "The following data would have been submitted to the server: \n\n"+
                    data.substr( 0, 120 )+'...'
                );
                return false;
            } );

        </script>

        <script>
// Get the template HTML and remove it from the doumenthe template HTML and remove it from the doument
var previewNode = document.querySelector("#template");
previewNode.id = "";
var previewTemplate = previewNode.parentNode.innerHTML;
previewNode.parentNode.removeChild(previewNode);

var myDropzone = new Dropzone(".container", { // Make the whole body a dropzone
  url: "/upload", // Set the url
  thumbnailWidth: 80,
  thumbnailHeight: 80,
  parallelUploads: 20,
  previewTemplate: previewTemplate,
  autoQueue: false, // Make sure the files aren't queued until manually added
  previewsContainer: "#previews", // Define the container to display the previews
  clickable: ".fileinput-button" // Define the element that should be used as click trigger to select files.
});

myDropzone.on("addedfile", function(file) {
  // Hookup the start button
  file.previewElement.querySelector(".start").onclick = function() { myDropzone.enqueueFile(file); };
});

// Update the total progress bar
myDropzone.on("totaluploadprogress", function(progress) {
  document.querySelector("#total-progress .progress-bar").style.width = progress + "%";
});

myDropzone.on("sending", function(file) {
  // Show the total progress bar when upload starts
  document.querySelector("#total-progress").style.opacity = "1";
  // And disable the start button
  file.previewElement.querySelector(".start").setAttribute("disabled", "disabled");
});

// Hide the total progress bar when nothing's uploading anymore
myDropzone.on("queuecomplete", function(progress) {
  document.querySelector("#total-progress").style.opacity = "0";
});

// Setup the buttons for all transfers
// The "add files" button doesn't need to be setup because the config
// `clickable` has already been specified.
document.querySelector("#actions .start").onclick = function() {
  myDropzone.enqueueFiles(myDropzone.getFilesWithStatus(Dropzone.ADDED));
};
document.querySelector("#actions .cancel").onclick = function() {
  myDropzone.removeAllFiles(true);
};
        </script>
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top mb-3">
            <a class="navbar-brand" href="{{ url_for('main') }}">UGMP Trueta </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav mr-auto">

                <li class="nav-item active">
                </li>
                <!-- <li class="nav-item dropdown active">
                  <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                    Cerca
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="#">By sample</a>
                    <a class="dropdown-item" href="#">By variant</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#">By disease</a>
                  </div>
                </li> -->
                <li class="nav-item active" >
                </li>

              {% if current_user.is_authenticated %}
              <li class="nav-item active">
                <a class="nav-link" href="{{ url_for('petition_menu') }}"><i class="fas fa-plus fa-xs"></i> Petició<span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item active">
                <a class="nav-link" href="{{ url_for('ngs_applications') }}"><i class="fas fa-poll fa-xs"></i> Apps <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item active">
                <a class="nav-link" href="{{ url_for('status') }}"><i class="fas fa-search fa-xs"></i> Resultats <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item active"style="border: 1px;border-color:white;">
                <a class="btn btn-outline-light"  href="{{ url_for('show_panels') }}"><i class="fas fa-cog fa-xs"></i> Panells</a>
              </li>
              </ul>
                <a class="nav-link" style="color:white;" href="{{ url_for('profile') }}"><i class="fas fa-user fa"></i> USUARI: {{ current_user.username }}  <span class="sr-only">(current)</span></a>
                <a class="btn btn-secondary mr-1" style="color:white;" href="{{ url_for('logout') }}"><i class="fas fa-door-closed fa-sm"></i> Tanca sessió</a>
              {% else %}
              </ul>
                <a class="nav-link" style="color:white;" href="{{ url_for('profile') }}"><i class="fas fa-user fa"></i> USUARI: {{ current_user.username }}  <span class="sr-only">(current)</span></a>
                <a class="btn btn-secondary mr-1" style="color:white;" href="{{ url_for('login') }}"><i class="fas fa-id-card fa-sm"></i> Identificació</a>
              {% endif %}

              <a class="btn " style="color:white;" href="{{ url_for('register') }}"> Registre</a>

            </div>
          </nav>
        {% endblock %}
    </head>
    <body style="margin-top:55px">
        {% block body %}
        {% endblock %}
    <script>

          $(document).ready(function() {
                $('#petition_table').DataTable( {
                  scroll:True
                } );
            } );

          $('#inputPetitionDocument').on('change',function(){
              //get the file name
              var fileName = $(this).val();
              //replace the "Choose a file" label
              $(this).next('.custom-file-label').html(fileName);
          })
        $(document).ready(function() {
          $('#status_table').DataTable( {
            scrollCollapse:True,
            scroll:True,
            "order": [[ 2, "desc" ]]
            } );
          } );
    </script>
    </body>

 </html>
